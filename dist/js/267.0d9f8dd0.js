"use strict";(self["webpackChunkwhispers"]=self["webpackChunkwhispers"]||[]).push([[267],{9790:function(e,s,t){t.d(s,{Z:function(){return K}});var n=t(3396),a=t(7139),i=t(9574);const o={class:"navbar-logo"},l=(0,n._)("img",{src:i,alt:"Whispers Logo"},null,-1),r=(0,n._)("span",{class:"bar"},null,-1),c=(0,n._)("span",{class:"bar"},null,-1),m=(0,n._)("span",{class:"bar"},null,-1),u=[r,c,m],p=(0,n._)("div",{class:"nav-item"},[(0,n._)("i",{class:"bx-fw bx bxs-home"}),(0,n._)("span",{class:"text-link"},"Home")],-1),d=(0,n._)("div",{class:"nav-item"},[(0,n._)("i",{class:"bx-fw bx bxs-chat"}),(0,n._)("span",{class:"text-link"},"Messages")],-1),g={class:"nav-link"},v=(0,n._)("i",{class:"bx-fw bx bx-log-out"},null,-1),b=(0,n.Uk)(),f=(0,n._)("span",{class:"logout-text"},"Log out",-1),h=[v,b,f];function w(e,s,t,i,r,c){const m=(0,n.up)("router-link"),v=(0,n.up)("NavSocial");return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["v-navbar w-100",{user:t.isUser}])},[(0,n._)("div",o,[(0,n.Wm)(m,{to:"/home"},{default:(0,n.w5)((()=>[l])),_:1}),t.isUser?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,a.C_)(["hamburger-menu",{open:i.isOpen}]),onClick:s[0]||(s[0]=(...e)=>i.openNav&&i.openNav(...e))},u,2)):(0,n.kq)("",!0)]),t.isUser?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,a.C_)(["nav-items",{open:i.isOpen}])},[(0,n.Wm)(m,{to:"/home",class:"nav-link"},{default:(0,n.w5)((()=>[p])),_:1}),(0,n.Wm)(m,{to:"/"+t.msgId,class:"nav-link"},{default:(0,n.w5)((()=>[d])),_:1},8,["to"]),(0,n._)("div",g,[(0,n._)("button",{class:"btn-logout",onClick:s[1]||(s[1]=(...e)=>i.Logout&&i.Logout(...e))},h)]),(0,n.Wm)(v)],2)):(0,n.kq)("",!0),t.isUser?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:1,class:"sbtn btn-create",onClick:s[2]||(s[2]=s=>e.$router.push("/register"))}," Create Whispers "))],2)}t(6056);var _=t(4870),k=t(65),x=t.p+"img/instagram.6f218904.svg",y=t.p+"img/github.106e3d84.svg",C=t.p+"img/twitter.9c453a6e.svg";const B={class:"nav-social nav-link d-lg-none"},O=(0,n.uE)('<a href="https://www.instagram.com/difazl/" class="-nav-sm instagram"><img src="'+x+'" alt="Instagram"></a><a href="https://github.com/radhifazl" class="-nav-sm github"><img src="'+y+'" alt="GitHub"></a><a href="https://twitter.com/radhiffazli" class="-nav-sm twitter"><img src="'+C+'" alt="Twitter"></a>',3),D=[O];function I(e,s,t,a,i,o){return(0,n.wg)(),(0,n.iD)("div",B,D)}var U={name:"NavSocial"},T=t(89);const H=(0,T.Z)(U,[["render",I]]);var L=H,N=t(8246),S={components:{NavSocial:L},name:"NavbarComp ",props:{isUser:{type:Boolean,default:!1},msgId:{type:String,default:""}},setup(){const e=(0,_.iH)(!1),s=(0,k.oR)(),t=()=>{e.value?e.value=!1:e.value=!0},n=async()=>{await s.dispatch("logout").then((()=>{N.F.fire({icon:"success",text:"Log out successfull"})}))};return{Logout:n,openNav:t,isOpen:e}}};const W=(0,T.Z)(S,[["render",w]]);var K=W},8765:function(e,s,t){t.r(s),t.d(s,{default:function(){return L}});var n=t(3396),a=t(7139),i=t(9242);const o={class:"replies-page ccontainer"},l={class:"back-btn-wrapper mb-3"},r=(0,n._)("i",{class:"bx-fw bx bxs-chevron-left"},null,-1),c=(0,n._)("span",null,"Back",-1),m=[r,c],u={class:"replies-content p-4"},p={class:"message-info"},d=(0,n._)("button",{class:"btn-comment sbtn",type:"submit"},"Submit",-1),g=(0,n._)("div",{class:"mt-3"},"Replies",-1),v={class:"replies mt-4"},b=["onClick"],f=(0,n._)("i",{class:"bx bxs-trash"},null,-1),h=[f],w={key:0,style:{color:"#888"}};function _(e,s,t,r,c,f){const _=(0,n.up)("Navbar");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(_,{isUser:!!r.isLoggedIn,msgId:r.id},null,8,["isUser","msgId"]),(0,n._)("div",l,[(0,n._)("button",{class:"back-btn",onClick:s[0]||(s[0]=(...e)=>r.back&&r.back(...e))},m)]),(0,n._)("div",u,[(0,n._)("div",p,[(0,n._)("p",null,(0,a.zw)(r.message),1)]),(0,n._)("form",{id:"comment-form",onSubmit:s[2]||(s[2]=(0,i.iM)(((...e)=>r.submitComment&&r.submitComment(...e)),["prevent"]))},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>r.comment=e),name:"comment",placeholder:"Reply to this message",class:"form-control inp-comment"},null,512),[[i.nr,r.comment]]),d],32),g,(0,n._)("div",v,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.replies,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"reply-text mb-2",key:e.id},[(0,n._)("span",null,(0,a.zw)(e.comment),1),r.isLoggedIn?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"delete delete-reply",onClick:s=>r.deleteComment(r.message_id,e.id)},h,8,b)):(0,n.kq)("",!0)])))),128))]),r.replies.length?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("p",w," There is no replies yet. "))])])}var k=t(9790),x=t(4870),y=t(6056),C=t(9601),B=t(2483),O=t(6035),D=t(2492),I=t.n(D),U={components:{Navbar:k.Z},name:"RepliesPage",setup(){const e=(0,x.iH)(!1),s=(0,x.iH)(""),t=(0,x.iH)(""),a=(0,B.yj)().params.id,i=(0,B.yj)().params.msgId,o=(0,x.iH)(""),l=(0,x.iH)([]),r=()=>{y.I.onAuthStateChanged((s=>{e.value=!!s}))},c=()=>{C.Z.back()},m=async()=>{await(0,O.QT)((0,O.JU)(y.db,"users",a,"messages",i)).then((e=>{o.value=e.data().message}))},u=async()=>{const e=(0,O.hJ)(y.db,"users",a,"messages",i,"replies"),s=(0,O.IO)(e,(0,O.Xo)("createdAt","asc"));(0,O.cf)(s,(e=>{l.value=[],e.docs.forEach((e=>{l.value.push({id:e.id,...e.data()})}))}))},p=async()=>{if(t.value)try{await(0,O.ET)((0,O.hJ)(y.db,"users",a,"messages",i,"replies"),{comment:t.value,createdAt:(0,O.Bt)()}).then((()=>{I().fire({title:"Comment sent!",text:"Your comment has been sent",icon:"success",confirmButtonText:"OK"}),t.value=""}))}catch(e){I().fire({title:"Oops...",text:"Something went wrong!",icon:"error",confirmButtonText:"OK"})}else I().fire({title:"Oops...",text:"You need to write a message",icon:"error",confirmButtonText:"OK"})},d=(e,s)=>{I().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async t=>{if(t.isConfirmed)try{const t=(0,O.JU)(y.db,"users",a,"messages",e,"replies",s);await(0,O.oe)(t).then((()=>{I().fire({title:"Deleted!",text:"Comment has been deleted",icon:"success",confirmButtonText:"OK"})})).finally((()=>{u()}))}catch(n){I().fire({title:"Oops...",text:"Something went wrong!",icon:"error",confirmButtonText:"OK"})}}))};return(0,n.bv)((()=>{r(),m(),u()})),{isLoggedIn:e,message_id:i,replies:l,back:c,id:s,message:o,comment:t,deleteComment:d,submitComment:p}}},T=t(89);const H=(0,T.Z)(U,[["render",_]]);var L=H}}]);
//# sourceMappingURL=267.0d9f8dd0.js.map