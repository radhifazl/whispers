"use strict";(self["webpackChunkwhispers"]=self["webpackChunkwhispers"]||[]).push([[8],{9790:function(e,s,a){a.d(s,{Z:function(){return W}});var t=a(3396),n=a(7139),i=a(9574);const l={class:"navbar-logo"},o=(0,t._)("img",{src:i,alt:"Whispers Logo"},null,-1),r=(0,t._)("span",{class:"bar"},null,-1),c=(0,t._)("span",{class:"bar"},null,-1),u=(0,t._)("span",{class:"bar"},null,-1),g=[r,c,u],m=(0,t._)("div",{class:"nav-item"},[(0,t._)("i",{class:"bx-fw bx bxs-home"}),(0,t._)("span",{class:"text-link"},"Home")],-1),d=(0,t._)("div",{class:"nav-item"},[(0,t._)("i",{class:"bx-fw bx bxs-chat"}),(0,t._)("span",{class:"text-link"},"Messages")],-1),p={class:"nav-link"},v=(0,t._)("i",{class:"bx-fw bx bx-log-out"},null,-1),h=(0,t.Uk)(),w=(0,t._)("span",{class:"logout-text"},"Log out",-1),b=[v,h,w];function f(e,s,a,i,r,c){const u=(0,t.up)("router-link"),v=(0,t.up)("NavSocial");return(0,t.wg)(),(0,t.iD)("div",{class:(0,n.C_)(["v-navbar w-100",{user:a.isUser}])},[(0,t._)("div",l,[(0,t.Wm)(u,{to:"/home"},{default:(0,t.w5)((()=>[o])),_:1}),a.isUser?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,n.C_)(["hamburger-menu",{open:i.isOpen}]),onClick:s[0]||(s[0]=(...e)=>i.openNav&&i.openNav(...e))},g,2)):(0,t.kq)("",!0)]),a.isUser?((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,n.C_)(["nav-items",{open:i.isOpen}])},[(0,t.Wm)(u,{to:"/home",class:"nav-link"},{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(u,{to:"/"+a.msgId,class:"nav-link"},{default:(0,t.w5)((()=>[d])),_:1},8,["to"]),(0,t._)("div",p,[(0,t._)("button",{class:"btn-logout",onClick:s[1]||(s[1]=(...e)=>i.Logout&&i.Logout(...e))},b)]),(0,t.Wm)(v)],2)):(0,t.kq)("",!0),a.isUser?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("button",{key:1,class:"sbtn btn-create",onClick:s[2]||(s[2]=s=>e.$router.push("/register"))}," Create Whispers "))],2)}a(6056);var _=a(4870),k=a(65),x=a.p+"img/instagram.e076006c.svg",C=a.p+"img/github.ab2c7ab2.svg",y=a.p+"img/twitter.047d17a1.svg";const O={class:"nav-social nav-link d-lg-none"},S=(0,t.uE)('<a href="https://www.instagram.com/difazl/" class="-nav-sm instagram"><img src="'+x+'" alt="Instagram"></a><a href="https://github.com/radhifazl" class="-nav-sm github"><img src="'+C+'" alt="GitHub"></a><a href="https://twitter.com/radhiffazli" class="-nav-sm twitter"><img src="'+y+'" alt="Twitter"></a>',3),U=[S];function B(e,s,a,n,i,l){return(0,t.wg)(),(0,t.iD)("div",O,U)}var D={name:"NavSocial"},I=a(89);const M=(0,I.Z)(D,[["render",B]]);var H=M,L=a(8246),N={components:{NavSocial:H},name:"NavbarComp ",props:{isUser:{type:Boolean,default:!1},msgId:{type:String,default:""}},setup(){const e=(0,_.iH)(!1),s=(0,k.oR)(),a=()=>{e.value?e.value=!1:e.value=!0},t=async()=>{await s.dispatch("logout").then((()=>{L.F.fire({icon:"success",text:"Log out successfull"})}))};return{Logout:t,openNav:a,isOpen:e}}};const T=(0,I.Z)(N,[["render",f]]);var W=T},5507:function(e,s,a){a.r(s),a.d(s,{default:function(){return E}});var t=a(3396),n=a(7139),i=a(9242);const l={class:"messages-page ccontainer"},o={class:"messages-wrapper p-4 mx-auto"},r={class:"form-wrapper mb-4"},c=(0,t.Uk)("Send a message to "),u={class:"name"},g={class:"messages-list"},m={class:"message-title"},d=(0,t.Uk)("Timeline of "),p={class:"name"},v={class:"message-content"},h={class:"message-text"},w=["onClick"],b=(0,t._)("i",{class:"bx-fw bx bxs-chevron-right"},null,-1),f=(0,t.Uk)(),_=(0,t._)("span",null,"Check Replies",-1),k=[b,f,_],x=["onClick"],C=(0,t._)("i",{class:"bx bxs-trash"},null,-1),y=[C];function O(e,s,a,b,f,_){const C=(0,t.up)("Navbar"),O=(0,t.up)("SendButton");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t.Wm)(C,{isUser:!!b.isLoggedIn,msgId:b.whispCode},null,8,["isUser","msgId"]),(0,t._)("div",o,[(0,t._)("div",r,[(0,t._)("h2",null,[c,(0,t._)("span",u,(0,n.zw)(b.whispersOwner),1)]),(0,t._)("p",null,(0,n.zw)(b.whispersOwner)+" will never know who sent this message",1),(0,t._)("form",{id:"form-msg",onSubmit:s[1]||(s[1]=(0,i.iM)(((...e)=>b.sendMessage&&b.sendMessage(...e)),["prevent"]))},[(0,t.wy)((0,t._)("textarea",{name:"message",class:"message-area",placeholder:"Write secret message","onUpdate:modelValue":s[0]||(s[0]=e=>b.message=e),maxlength:"155"},null,512),[[i.nr,b.message]]),(0,t.Wm)(O)],32)]),(0,t._)("div",g,[(0,t._)("div",m,[(0,t._)("h4",null,[d,(0,t._)("span",p,(0,n.zw)(b.whispersOwner),1)]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.messages,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"message mb-3",key:e.id},[(0,t._)("div",v,[(0,t._)("div",h,[(0,t._)("p",null,(0,n.zw)(e.message),1)]),(0,t._)("div",{class:"check mt-3",onClick:s=>b.checkReplies(e.id)},k,8,w)]),b.isLoggedIn?((0,t.wg)(),(0,t.iD)("div",{key:0,class:"delete",onClick:s=>b.deleteMessage(e.id)},y,8,x)):(0,t.kq)("",!0)])))),128))])])])])}var S=a(4870),U=a(6056),B=a(6035),D=a(9790),I=a(2483);const M={class:"btn-send w-100 mt-3",type:"submit"},H=(0,t._)("i",{class:"bx-fw bx bxs-send"},null,-1),L=(0,t.Uk)(" Send Message "),N=[H,L];function T(e,s,a,n,i,l){return(0,t.wg)(),(0,t.iD)("button",M,N)}var W={name:"SendButton"},z=a(89);const Z=(0,z.Z)(W,[["render",T]]);var K=Z,R=a(2492),Y=a.n(R),q=a(9601),A={components:{Navbar:D.Z,SendButton:K},name:"MessagePage",setup(){const e=(0,S.iH)(!1),s=(0,S.iH)(""),a=(0,S.iH)((0,I.yj)().params.id),n=(0,S.iH)(""),i=(0,S.iH)([]),l=async()=>{const e=(0,B.hJ)(U.db,"whispers","messages",a.value),s=(0,B.IO)(e,(0,B.Xo)("createdAt","asc"));(0,B.cf)(s,(e=>{i.value=[],e.docs.forEach((e=>{i.value.push({id:e.id,...e.data()})}))}))},o=async e=>{q.Z.push({name:"RepliesPage",params:{id:a.value,msgId:e}})},r=async()=>{await(0,B.QT)((0,B.JU)(U.db,"usernames",a.value)).then((e=>{s.value=e.data().name}))};function c(e){function s(e){return e.toString().padStart(2,"0")}const a=s(e.getDate())+"-"+s(e.getMonth()+1)+"-"+e.getFullYear(),t=a;return t}const u=async()=>{if(n.value)try{await(0,B.ET)((0,B.hJ)(U.db,"whispers","messages",a.value),{message:n.value,createdAt:(0,B.Bt)(),date:c(new Date)}).then((()=>{n.value=""}))}catch(e){Y().fire({title:"Oops...",text:"Something went wrong!",icon:"error",confirmButtonText:"OK"})}else Y().fire({title:"Oops...",text:"You need to write a message",icon:"error",confirmButtonText:"OK"})},g=e=>{Y().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((async s=>{if(s.isConfirmed)try{const s=(0,B.JU)(U.db,"whispers","messages",a.value,e);await(0,B.oe)(s).then((()=>{Y().fire({title:"Deleted!",text:"Message has been deleted",icon:"success",confirmButtonText:"OK"})})).finally((()=>{l()}))}catch(t){Y().fire({title:"Oops...",text:"Something went wrong!",icon:"error",confirmButtonText:"OK"})}}))},m=()=>{U.I.onAuthStateChanged((s=>{e.value=!!s}))};return(0,t.bv)((()=>{r(),l(),m()})),{isLoggedIn:e,whispersOwner:s,message:n,sendMessage:u,messages:i,checkReplies:o,deleteMessage:g,whispCode:a}}};const J=(0,z.Z)(A,[["render",O]]);var E=J}}]);
//# sourceMappingURL=8.31af8771.js.map